<aura:component Controller="TransactionController"  implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction,lightning:actionOverride" access="global">
    
    <aura:attribute name="cutoffCounter" type="integer" default="0" />
    <!-- For Client Consonent File Attachment Start -->
    <!-- 'parentId' Aura Attribute for store the Id for Parent Record where we are attach our file -->  
    <aura:attribute name="parentId" type="Id"/>
    <!-- 'showLoadingSpinner' attribute for show/hide the uploading image and msg in aura:if-->
    <aura:attribute name="showLoadingSpinner" type="boolean" default="false" />
    <!-- 'fileName' attribute for display the selected file name -->  
    <aura:attribute name="fileName" type="String" default="No File Selected.." />
    <!-- Lightning Input with file type and on file change call the 'handleFilesChange' controller -->
    <aura:attribute name="attachmentName" type="String" default=""/>
    <!-- For Client Consonent File Attachment Start -->
    
    <!--lightning help text for input field-->
    <aura:attribute name="holdingInformation" type="String" default="Please enter value"/>
    <aura:attribute name="clientHoldingType" type="String" default="Please enter value"/>
    
    <!-- disable preview screen fields -->
    <aura:attribute name="isDisabled" type="Boolean" default="true" />
    
    <aura:attribute name="selectedFamilyRecord" type="sObject" default="{}"/>
    <aura:attribute name="filteredFamilyList" type="String[]" />
    <aura:attribute name="orderEntry" type="Order_Entry__c" default="{ 'sobjectType': 'Order_Entry__c' }"/>	
    <aura:attribute name="IPOList" type= "String[]" default= "--NONE-- ,IPO"/>
    <aura:attribute name="isoderentryMF" type="boolean"  default="false"/>
    <aura:attribute name="filteredClientList" type="String[]" />
    <aura:attribute name="filteredClientAccountList" type="String[]" />
    <aura:attribute name="filteredClientAssetList" type="String[]" />
        
    <aura:attribute name="selectedClientRecord" type="sObject" default="{}"/>
    <aura:attribute name="selectedClientAccountRecord" type="sObject" default="{}"/>
    <aura:attribute name="selectedProduct" type="sObject" default="{}"/>
    
    <aura:attribute name="selectedClientCode" type="sObject" default="{}"/>
    <aura:attribute name="selectedFolio" type="sObject" default="{}"/>
    <aura:attribute name="selectedClientPAN" type="String" />
    <aura:attribute name="selectedClientAccountId" type="String" />
    <aura:attribute name="selectedClientAccountIdAttr" type="String" />
    <aura:attribute name="selectedClientAssetRecord" type="sObject" default="{}"/>
    
    <aura:attribute name="selectedIPOName" type="sObject" default="{}"/>

    <aura:attribute name="primaryFA" type="String" />

    <aura:attribute name="productList" type="String[]" />
    <aura:attribute name="objDetail" type="contact" default="{'sobjectType' : 'Order_Entry__c'}"/>
    <aura:attribute name="controllingFieldAPI" type="string" default="Product_Type_Order_Entry__c" description="store field API name of Controller field"/>
    <aura:attribute name="dependingFieldAPI" type="string" default="Transaction_Type__c" description="store field API name of dependent field"/>
    <aura:attribute name="listControllingValues" type="list" default="[]" description="to store controller field values"/>
    <aura:attribute name="listMarketTypeValues" type="list" default="IPO,Market purchase" description="to store Market Type field values"/>
    <aura:attribute name="listDependingValues" type="list" default="['--- None ---']" description="to store dependent field values"/>
    <aura:attribute name="depnedentFieldMap" type="map" description="map to store dependent values with controlling value"/>
    <aura:attribute name="bDisabledDependentFld" type="boolean" default="true"/> 
    <aura:attribute name="isFirstScreen" type="Boolean" Default ="true" />
    
    <aura:attribute name="isPreviewScreen" type="Boolean" Default ="false" />
    
    <aura:attribute name="islabel" type="String" Default ="Transaction Type" />
    
    <aura:attribute name="orderDateStr" type="String"/>
    <aura:attribute name="valueDateStr" type="String"/>
    <aura:attribute name="accountNameDisplay" type="String"/>
    
    <aura:attribute name="isPurchaseAmount" type="Boolean" Default ="false"/>
    <aura:attribute name="currentTime" type="DateTime" />
 
    <aura:attribute name="isIPOShow" type="Boolean" Default ="false" />
    
    
    <aura:attribute name="isSP" type="Boolean" Default ="false" />
    <aura:attribute name="isPriceDisable" type="Boolean" default="false" />
    
    <aura:attribute name="isIPOBondPriceDisable" type="Boolean" Default ="true" />
    <aura:attribute name="isIPOBondFaceValueDisable" type="Boolean" Default ="true" />
    <aura:attribute name="isIPOBondUnitDisable" type="Boolean" Default ="false" />
    <aura:attribute name="isIPOBondAmountDisable" type="Boolean" Default ="false" />
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
   <!-- <aura:handler name="change" value="{!v.orderEntry.Family_Name__c}" action="{!c.familySelection}"/> -->
    <aura:handler name="change" value="{!v.selectedClientRecord}" action="{!c.clientAccountSelection}"/>
    <aura:handler name="change" value="{!v.selectedClientAccountRecord}" action="{!c.getProducts}"/>
     <aura:handler name="change" value="{!v.selectedFamilyRecord}" action="{!c.setValueToFamily}"/>
    
    
    <aura:handler name="change" value="{!v.selectedIPOName}" action="{!c.setValueToIPOName}"/> 
    <aura:attribute name="isIPO" type="Boolean" Default ="false" />
    <!-- Check for Profile Access -->
    <aura:attribute name="isProfileAccess" type="Boolean" Default ="false" />
        
    <aura:attribute name="tooltip" type="boolean" default="false" />
    <aura:attribute name="tooltip1" type="boolean" default="false" />
    
    <!-- show Modal for SoftCuttoff Time Ends -->
    
    <aura:renderIf isTrue="{!v.isProfileAccess}">
        <!-- Screen 1 for Both MF and Bond and PMS and IPO-->
        <aura:renderIf isTrue="{!v.isFirstScreen}">
            <div class="demo-only" style="height: 640px;width:100%">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-scrollable">
                    <div class="slds-modal__container" style="max-width: 70% !important;width:70% !important;">
                        <header class="slds-modal__header">
                            <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" onclick="{!c.closeModel}">
                                X
                                <span class="slds-assistive-text">Close</span></button>
                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Initiate Transaction</h2>
                        </header>
                        <article class="slds-card">
                            <div class="slds-card__body slds-card__body_inner">
                                <div class="slds-path">
                                    <div class="slds-grid slds-path__track">
                                        <div class="slds-grid slds-path__scroller-container">
                                            <div class="slds-path__scroller" role="application">
                                                <div class="slds-path__scroller_inner">
                                                    <ul class="slds-path__nav" role="listbox" aria-orientation="horizontal">
                                                        <li class="slds-path__item slds-is-current" role="presentation">
                                                            <a  aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-11" role="option" tabindex="-1">
                                                                <span class="slds-path__title "> Initiate Transaction</span>
                                                            </a>
                                                        </li>
                                                        <li class="slds-path__item slds-is-incomplete" role="presentation">
                                                            <a onclick="{!c.loadMainScreen}" aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-12" role="option" tabindex="-1">
                                                                <span class="slds-path__stage">
                                                                    
                                                                </span>
                                                                <span class="slds-path__title" >Transaction Details</span>
                                                            </a>
                                                        </li>
                                                        <li class="slds-path__item slds-is-incomplete" role="presentation">
                                                            <a onclick="{!c.setValuesToField}" aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-13" role="option" tabindex="0">
                                                                <span class="slds-path__stage">
                                                                    
                                                                    <span class="slds-assistive-text">Current Stage:</span>
                                                                </span>
                                                                <span class="slds-path__title">Compliance</span>
                                                            </a>
                                                        </li>                
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>       
                                    </div>
                                </div>
                            </div>
                        </article>
                        
                        <div class="slds-grid slds-wrap slds-size_2-of-2 slds-modal__content">
                            <div class="slds-col slds-size_1-of-2">
                                <div class="slds-p-around_medium" id="modal-content-id-1" >
                                    <!--lightning help text for input field-->                                                                
                                    <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                    <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Family Name</label>
                                     <!-- <force:inputField aura:id="familyName" required="true"  value="{!v.orderEntry.Family_Name__c}" />  -->
                               <c:customLookup objectAPIName="Account" IconName="standard:account" selectedRecord="{!v.selectedFamilyRecord}" listOfFilteredRecords ="{!v.filteredFamilyList}" placeholder="Search Family"  /> 
                                </div>
                            </div>
                            
                            <div class="slds-col slds-size_1-of-2">
                                
                                <div class="slds-p-around_medium" id="modal-content-id-1" >
                                    <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                    <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Client Name</label>
                                    <c:customLookup objectAPIName="Account" aura:id="clientNameLookup" IconName="standard:account" selectedRecord="{!v.selectedClientRecord}" listOfFilteredRecords ="{!v.filteredClientList}" placeholder="Search Client"  />
                                </div>
                            </div>
                            <div class="slds-col slds-size_1-of-2">
                                <div class="slds-p-around_medium" id="modal-content-id-1" >
                                    <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                    <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Account Name</label>
                                    <c:customLookup objectAPIName="Client_Account__c" aura:id="clientAccountLookup" IconName="standard:product" selectedRecord="{!v.selectedClientAccountRecord}" listOfFilteredRecords ="{!v.filteredClientAccountList}" placeholder="Search Client Account"  />
                                </div>
                            </div>
                            
                            <div class="slds-col slds-size_1-of-2 ">
                                <div class=" slds-p-around_medium" id="modal-content-id-1" >
                                    <!--Controller Field-->
                                    <lightning:select name="controllerFld"
                                                      value="{!v.orderEntry.Product_Type_Order_Entry__c}"
                                                      label="Product Type"
                                                      required="true" >
                                        <aura:iteration items="{!v.listControllingValues}" var="val">
                                            <aura:if isTrue ="{!or(val == '--- None ---',val =='IPO')}" >
                                                <option value="{!val}">{!val}</option>
                                            </aura:if>     
                                        </aura:iteration>
                                    </lightning:select>
                                </div>
                            </div>
                            
                            
                            <div class="slds-col slds-size_1-of-2">
                                <!--Dependent Field-->
                                <div class="slds-p-around_medium" id="modal-content-id-1" >
                                    
                                    <lightning:select name="dependentFld"
                                                      value="{!v.orderEntry.Transaction_Type__c}"
                                                      label="{!v.islabel}"
                                                      onchange="{!c.transactionSelection}" 
                                                      disabled="{!v.bDisabledDependentFld}" required="true">
                                        <aura:iteration items="{!v.listDependingValues}" var="val">
                                            <option value="{!val}">{!val}</option>
                                        </aura:iteration>
                                    </lightning:select>
                                    
                                </div> 
                            </div>
                            
                            <aura:renderIf  isTrue="{!v.orderEntry.Product_Type_Order_Entry__c == 'IPO'}">
                                <div class="slds-col slds-size_1-of-2">
                                    <div class="slds-p-around_medium" id="modal-content-id-1" >
                                        <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                        <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >IPO Name</label>
                                        <c:CustomListSearch  selectedRecord="{!v.selectedIPOName}" aura:id="ipoNameLookup" objectName="IPO_Master__c" selectedIPOType="{!v.orderEntry.Transaction_Type__c}" fieldName="Name__c" label="" iconName="standard:account" placeholder="Enter IPO Name" widthFlag="50"/>
                                    </div>
                                </div>
                            </aura:renderIf>
                            
                            <div class="slds-col slds-size_1-of-2">
                            </div>  
                        </div> 
                        <footer class="slds-modal__footer">	
                            <button class="slds-button slds-button_neutral" onclick="{!c.closeModel}">Cancel</button>
                            <button class="slds-button slds-button_brand" onclick="{!c.loadMainScreen}">Next</button>
                        </footer>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </div>
        </aura:renderIf>
    </aura:renderIf>
  
    
    <!--  ipo screen-->
    <aura:renderIf  isTrue="{!v.isIPO}">
        <div class="demo-only" style="height: 740px;width:100%">
            <section tabindex="-1" class="slds-modal slds-fade-in-open" role="dialog" aria-describedby="modal-content-id-1" aria-labelledby="modal-heading-01" aria-modal="true">
                <div class="slds-modal__container lightningtoast" style="max-width: 70% !important;width: 70% !important;">
                    <header class="slds-modal__header">
                        <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" onclick="{!c.closeModel}">
                            X
                            <span class="slds-assistive-text">Close</span></button>
                        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Transaction Details</h2>
                    </header>
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-path">
                                <div class="slds-grid slds-path__track">
                                    <div class="slds-grid slds-path__scroller-container">
                                        <div class="slds-path__scroller" role="application">
                                            <div class="slds-path__scroller_inner">
                                                <ul class="slds-path__nav" role="listbox" aria-orientation="horizontal">
                                                    <li class="slds-path__item slds-is-active slds-is-complete" role="presentation">
                                                        <aura:if isTrue="{! or(v.isPurchase,v.isRedemption)}" >
                                                            <a onclick="{!c.loadFirstScreen}" aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-11" role="option" tabindex="-1" onmouseover="{!c.showToolTip}" onmouseout="{!c.HideToolTip}">
                                                                <span class="slds-path__title " > 
                                                                    {!v.accountNameDisplay}~{!v.orderEntry.Transaction_Type__c}
                                                                </span> 
                                                            </a>
                                                        </aura:if>
                                                        <aura:if isTrue="{!v.isIPO}" >
                                                            <a onclick="{!c.loadFirstScreen}" aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-11" role="option" tabindex="-1" onmouseover="{!c.showToolTip}" onmouseout="{!c.HideToolTip}">
                                                                <span class="slds-path__title " > 
                                                                    {!v.orderEntry.Client_Account_Display__c}~{!v.orderEntry.Transaction_Type__c}~{!v.orderEntry.IPO_Name__c}
                                                                </span> 
                                                            </a>
                                                        </aura:if>
                                                    </li>
                                                    <aura:if isTrue="{!v.tooltip}" >
                                                        <aura:if isTrue="{!v.isIPO}" >
                                                            <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" id="help" style="position:absolute;top:-50px;left:250px">
                                                                <div class="slds-popover__body"><span>{!v.orderEntry.Client_Account_Display__c}~{!v.orderEntry.Transaction_Type__c}~{!v.orderEntry.IPO_Name__c}</span></div>
                                                            </div>
                                                        </aura:if>
                                                    </aura:if>
                                                    
                                                    <li class="slds-path__item slds-is-current" role="presentation">
                                                        <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-12" role="option" tabindex="-1">
                                                            <span class="slds-path__stage">
                                                                
                                                            </span>
                                                            <span class="slds-path__title">Transaction Details</span>
                                                        </a>
                                                    </li>
                                                    <li class="slds-path__item slds-is-incomplete" role="presentation">
                                                        <a  onclick="{!c.setValuesToField}"  aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-13" role="option" tabindex="0">
                                                            <span class="slds-path__stage">
                                                                
                                                                <span class="slds-assistive-text">Current Stage:</span>
                                                            </span>
                                                            <span class="slds-path__title">Compliance</span>
                                                        </a>
                                                    </li>                
                                                </ul>
                                            </div>
                                        </div>
                                    </div>       
                                </div>
                            </div>
                        </div>
                    </article>
                    
                    
                    <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                        <div style="width: 100%;">
                            <div class="slds-form slds-form_compound" style="text-align: left;">
                                <div class="slds-form-element__group">
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Order Date</label>
                                            <div style="margin-top: -13px;">
                                                <lightning:input aura:id="orderDate"   value="{!v.orderDateStr}" disabled="{!v.isDisabled}"/>
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >IPO Application Number</label>
                                            
                                            <force:inputField required="true"  value="{!v.orderEntry.IPO_Application_Number__c}" />
                                            
                                        </div>
                                        
                                    </div> 
                                    
                                    
                                    
                                    <div class="slds-form-element__row" >
                                        
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" > Cut Off Price</label>
                                            <div style="margin-top: -15px;">
                                                <force:inputField required="true"  value="{!v.orderEntry.Cut_Off_Price__c}" change="{!c.handleCutOffChange}" />
                                            </div>
                                        </div>
                                        <aura:renderIf isTrue="{!v.orderEntry.Transaction_Type__c == 'Equity IPO'}">
                                            <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                                <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                                <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Price  </label>
                                                <div style="margin-top: -13px;">
                                                    <lightning:input  value="{!v.orderEntry.Price_new__c}"  disabled="{!v.isIPOBondPriceDisable}"  />
                                                </div>
                                            </div>
                                        </aura:renderIf>
                                        
                                        <aura:renderIf isTrue="{!v.orderEntry.Transaction_Type__c == 'Bond IPO'}">
                                            
                                            <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style="padding-top: 10px">
                                                <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                                <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" > % of Facevalue</label>
                                                <div style="margin-top: -14px;">
                                                    <lightning:input  value="{!v.orderEntry.of_Facevalue__c}"  disabled="{!v.isIPOBondFaceValueDisable}" onchange="{!c.handleFaveValueChange}"/>
                                                </div>
                                            </div>
                                        </aura:renderIf>
                                    </div>                     
                                    
                                    <aura:renderIf isTrue="{!v.orderEntry.Transaction_Type__c == 'Bond IPO'}">
                                        <div class="slds-form-element__row" > 
                                            <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                                <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                                <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Price </label>
                                                <div style="margin-top: -13px;">
                                                    <lightning:input  value="{!v.orderEntry.Price_new__c}"  disabled="{!v.isIPOBondPriceDisable}"  onchange="{!c.handlePriceChange}" />
                                                </div> 
                                            </div>
                                            <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 10px">
                                                <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                                <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Amount</label>
                                                <div style="margin-top: -13px;">
                                                    <lightning:input  value="{!v.orderEntry.Transaction_Amount_Financial_Transaction__c}" disabled="{!v.isIPOBondAmountDisable}"  onchange="{!c.handleAmountChange}" />
                                                </div>  
                                            </div>                                                                  
                                        </div>
                                    </aura:renderIf>
                                    
                                    <div class="slds-form-element__row" >
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 20px">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >No of units</label>
                                            <div style="margin-top: -13px;">
                                                <lightning:input  value="{!v.orderEntry.No_of_units__c}" disabled="{!v.isIPOBondUnitDisable}"  onchange="{!c.handleUnitChange}" />
                                            </div>
                                        </div>
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 20px">
                                            
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Funding ROI</label>
                                            
                                            <force:inputField required="true"  value="{!v.orderEntry.Funding_ROI__c}" />
                                            
                                        </div>               
                                    </div>
                                    
                                    
                                    <div class="slds-form-element__row" >
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style="padding-top: 20px">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="12" width="12"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Payment Mode</label>
                                            <div style="margin-top: -10px;">
                                                <force:inputField required="true"  value="{!v.orderEntry.Payment_Mode__c}" />
                                            </div>
                                        </div>
                                        
                                    </div>
                                    
                                    <div class="slds-form-element__row">
                                        
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 20px 0px 0px 0px;">                                                                                        
                                        </div>                                        
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick="{!c.closeModel}" >Cancel</button>
                        <button class="slds-button slds-button_brand" onclick="{!c.loadFirstScreen}" >Back</button>
                        <button class="slds-button slds-button_brand" onclick="{!c.setValuesToField}" >Next</button>
                        
                        
                        <!--<button class="slds-button slds-button_brand" onclick="{!c.saveAnswer}" >Save</button>-->
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div>
        
    </aura:renderIf> 
    
    
    
    <!-- Screen 3 FOR Both MF and BOND ans PMS-->
    <aura:renderIf  isTrue="{!v.isPreviewScreen}">
        <div class="demo-only" style="height: 740px;width:100%">
            <section tabindex="-1" class="slds-modal slds-fade-in-open" role="dialog" aria-describedby="modal-content-id-1" aria-labelledby="modal-heading-01" aria-modal="true">
                <div class="slds-modal__container lightningtoast" style="max-width: 70% !important;width: 70% !important;">
                    <header class="slds-modal__header">
                        <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" onclick="{!c.closeModel}">
                            X
                            <span class="slds-assistive-text">Close</span></button>
                        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Compliance</h2>
                    </header>
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-path">
                                <div class="slds-grid slds-path__track">
                                    <div class="slds-grid slds-path__scroller-container">
                                        <div class="slds-path__scroller" role="application">
                                            <div class="slds-path__scroller_inner">
                                                <ul class="slds-path__nav" role="listbox" aria-orientation="horizontal">
                                                    <li class="slds-path__item slds-is-active slds-is-complete" role="presentation">
                                                        <aura:if isTrue="{!v.isIPOShow}" >
                                                            <a onclick="{!c.loadFirstScreen}" aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-11" role="option" tabindex="-1" onmouseover="{!c.showToolTip}" onmouseout="{!c.HideToolTip}">
                                                                <span class="slds-path__title " > 
                                                                    {!v.orderEntry.Client_Account_Display__c}~{!v.orderEntry.Transaction_Type__c}~{!v.orderEntry.IPO_Name__c}
                                                                </span> 
                                                            </a>
                                                        </aura:if>
                                                    </li>
                                                    <aura:if isTrue="{!v.tooltip}" >
                                                        <aura:if isTrue="{!v.isIPOShow}" >
                                                            <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" id="help" style="position:absolute;top:-50px;left:250px">
                                                                <div class="slds-popover__body"><span>{!v.orderEntry.Client_Account_Display__c}~{!v.orderEntry.Transaction_Type__c}~{!v.orderEntry.IPO_Name__c}</span></div>
                                                            </div>
                                                        </aura:if>
                                                    </aura:if>
                                                    <li class="slds-path__item slds-is-active slds-is-complete" role="presentation" >
                                                        <a onclick="{!c.getToMain}"  aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-12" role="option" tabindex="-1" >
                                                            <span class="slds-path__stage">                                                                
                                                            </span>
                                                            <aura:if isTrue="{!v.isIPOShow}" >
                                                                <aura:if isTrue="{!and(v.orderEntry.No_of_units__c != null,v.orderEntry.No_of_units__c != '')}" >
                                                                    <span class="slds-path__title">Unit {! v.orderEntry.No_of_units__c} On  {!v.orderDateStr}
                                                                	</span>
                                                                </aura:if>
                                                                <aura:if isTrue="{!and(v.orderEntry.Transaction_Amount_Financial_Transaction__c != null, v.orderEntry.Transaction_Amount_Financial_Transaction__c != '')}" >
                                                                    <span class="slds-path__title">INR {!v.orderEntry.Transaction_Amount_Financial_Transaction__c} On  {!v.orderDateStr}
                                                                	</span>
                                                                </aura:if>
                                                            </aura:if>
                                                        </a>
                                                    </li>
                                                    
                                                    <li class="slds-path__item slds-is-current" role="presentation">                                                        
                                                        <a onclick="{!c.loadFirstScreen}"  aria-selected="true" class="slds-path__link" href="javascript:void(0);" id="path-11" role="option" tabindex="-1" onmouseover="{!c.showToolTip1}" onmouseout="{!c.HideToolTip1}">
                                                            <span class="slds-path__title">Client Risk Profile :{!v.orderEntry.Client_Risk_Profile__c } ~ Product Risk Profile:{!v.orderEntry.Product_Risk_Profile_FinancialT__c }
                                                            </span> 
                                                        </a>                                                       
                                                    </li>																										
                                                    <aura:if isTrue="{!v.tooltip1}" >                                                        
                                                        <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" id="help" style="position:absolute;top:-50px;right:10px">
                                                            <div class="slds-popover__body"> <span >Client Risk Profile :{!v.orderEntry.Client_Risk_Profile__c } ~ Product Risk Profile:{!v.orderEntry.Product_Risk_Profile_FinancialT__c }
                                                                </span></div>
                                                        </div>                                                                                                                                                                           
                                                    </aura:if>	
                                                </ul>
                                            </div>
                                        </div>
                                    </div>       
                                </div>
                            </div>
                        </div>
                    </article>
                    <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                        <div style="width: 100%;">
                            <div class="slds-form slds-form_compound" style="text-align: left;">
                                <div class="slds-form-element__group">
                                    
                                    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 20px 0px 0px 0px;">                                            
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Client Risk Profile</label>
                                            <lightning:input value="{!v.orderEntry.Client_Risk_Profile__c}" disabled="{!v.isDisabled}"/>
                                        </div>
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 20px 0px 0px 10px;">
                                            <!--  <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>-->
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Product Risk Profile </label>
                                            <lightning:input value="{!v.orderEntry.Product_Risk_Profile_FinancialT__c}" disabled="{!v.isDisabled}"/>
                                        </div>
                                    </div>    
                                    <div class="slds-form-element__row">
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"   style ="padding: 10px 0px 0px 0px;">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Primary FA</label>
                                            <lightning:input value="{!v.orderEntry.Primary_FA__c}" disabled="{!v.isDisabled}"/>
                                        </div>
                                    </div>
                                    <div class="slds-form-element__row">                                        
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 10px 0px 0px 0px;">
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Communication Mode</label>
                                            <div Style=" margin: -11px 0px 0px 0px;">
                                                <force:inputField required="true"  value="{!v.orderEntry.Origin__c}" />
                                            </div>
                                        </div>
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 10px 0px 0px 10px;" >
                                            <img src="{! $Resource.IPSMandatoryIcon}" height="13" width="13"/>
                                            <label class="slds-form-element__label" for="textareaSample2" style="display: inline;" >Client Consent</label>
                                            <div Style=" margin: -11px 0px 0px 0px;">
                                                <lightning:input value="{!v.orderEntry.Client_Concent__c}" disabled="{!v.isDisabled}"/>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    
                                    <div class="slds-form-element__row">  
                                        <aura:if isTrue="{! v.isIPOShow}" >
                                            <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2"  style ="padding: 20px 0px 0px 0px; padding-top: 25px;">                                           
                                                <lightning:input required="true" aura:id="fileIPO" onchange="{!c.handleFilesChange}" label="Client Consent  Attachment" type="file" name="file" multiple="false"/>
                                                <div class="slds-text-body_small slds-text-color_error">{!v.fileName} </div>
                                                
                                                <!--use aura:if for show-hide the loading spinner image--> 
                                                <aura:if isTrue="{!v.showLoadingSpinner}">
                                                    <div class="slds-text-body_small slds-text-color_error">Uploading... 
                                                        <img src="/auraFW/resources/aura/images/spinner.gif" class="spinner-img" alt="Loading"/>'
                                                    </div>
                                                </aura:if>
                                                <br/>                                            
                                            </div>
                                        </aura:if>
                                        <div class="slds-form-element slds-wrap slds-col slds-size_1-of-2" style ="padding: 10px 0px 0px 0px;">
                                            
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick="{!c.closeModel}" >Cancel</button>
                        <button class="slds-button slds-button_brand" onclick="{!c.getToMain}" >Back</button>                        
                        <button class="slds-button slds-button_brand" onclick="{!c.SaveRecord}" >Save for Preview</button>                       
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </div>
    </aura:renderIf>
</aura:component>